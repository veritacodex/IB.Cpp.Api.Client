SET(TWSAPI ${CMAKE_SOURCE_DIR}/tws-api)
SET(IBAPICLIENT ${CMAKE_SOURCE_DIR}/library/src)
SET(BUILD_SHARED_LIBS YES)

INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/library/inc)
INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/tws-api)

FILE(GLOB TWSAPI_SRC CONFIGURE_DEPENDS
        "${TWSAPI}/*.h"
        "${TWSAPI}/*.cpp"
)
FILE(GLOB IBAPICLIENT_SRC CONFIGURE_DEPENDS
        "${IBAPICLIENT}/*.cpp"
)

FIND_PACKAGE(spdlog REQUIRED)

ADD_LIBRARY(IbApiClient IbClient.cpp ${TWSAPI_SRC} ${IBAPICLIENT_SRC})
TARGET_LINK_DIRECTORIES(IbApiClient PUBLIC ${TWSAPI_SRC})
TARGET_LINK_LIBRARIES(IbApiClient PUBLIC TwsApiClient PUBLIC spdlog::spdlog_header_only)
