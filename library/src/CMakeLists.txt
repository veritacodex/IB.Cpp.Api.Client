SET(TWSAPI ${CMAKE_SOURCE_DIR}/third-party/tws-api)
SET(BUILD_SHARED_LIBS YES)

INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/library/inc)
FILE(GLOB TWSAPI_SRC CONFIGURE_DEPENDS
        "${TWSAPI}/*.h"
        "${TWSAPI}/*.cpp"
)

ADD_LIBRARY(IbApiClient IbClient.cpp ${TWSAPI_SRC})
TARGET_LINK_DIRECTORIES(IbApiClient PUBLIC ${CMAKE_SOURCE_DIR}/third-party/tws-api)
TARGET_LINK_LIBRARIES(IbApiClient PUBLIC libTwsSocketClient.so)